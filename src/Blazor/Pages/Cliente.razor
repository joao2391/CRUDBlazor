@page "/cliente"

@using Blazor.Data
@using Models = Blazor.Client.Models

@inject ClienteService Service

<h3>Cliente</h3>

<p>Insere o cliente na tabela</p>

<div class="container">
    <h1 class="text-center">Cadastro de Clientes</h1>
    <div class="row" style="padding-top: 10%">
        <div class="col-lg-12">
            
            <div class="form-group-lg">
                <EditForm class="text-center" Model="@_cliente">
                    <div class="col-lg-6">
                        <label id="Nome"> Nome:
                            <InputText id="Nome" @bind-Value="@_cliente.Nome" class="form-control" />
                        </label>
                        <span class="text-danger" style="font-size:small;"></span>
                    </div>

                    <div class="col-lg-6">
                        <label id="Rg">RG:</label>
                        <InputText id="Rg" @bind-Value="@_cliente.Rg" class="form-control" />
                        <span class="text-danger" style="font-size:small;"></span>
                    </div>

                    <div class="col-lg-6">
                        <label id="Cpf"></label>
                        <InputText id="Cpf" @bind-Value="@_cliente.Cpf" class="form-control" />
                        <span class="text-danger" style="font-size:small;"></span>
                    </div>

                    <div class="col-lg-6">
                        <label id="Endereco"></label>
                        <InputText id="Endereco" @bind-Value="@_cliente.Endereco" class="form-control" />
                        <span class="text-danger" style="font-size:small;"></span>
                    </div>

                    <div class="col-lg-6">
                        <label id="Telefone"></label>
                        <InputText id="Telefone" @bind-Value="@_cliente.Telefone" class="form-control" />
                        <span class="text-danger" style="font-size:small;"></span>
                    </div>

                    <div class="col-lg-6">
                        <label id="Celular"></label>
                        <InputText id="Celular" @bind-Value="@_cliente.Celular" class="form-control" />
                        <span class="text-danger" style="font-size:small;"></span>
                    </div>

                    <div class="col-lg-6">
                        <label id="Email"></label>
                        <InputText id="Email" @bind-Value="@_cliente.Email" class="form-control" />
                        <span class="text-danger" style="font-size:small;"></span>
                    </div>

                    <div class="col-lg-6">
                        <br />
                        <br />
                        <input type="submit" value="Cadastrar" class="btn btn-primary" @onclick="Cadastrar"/>
                    </div>
                </EditForm>

            </div>

        </div>
    </div>

</div>







@if (clientes == null)
{
    <p><em>Loading...</em></p>
}
else
{
    <table class="table">
        <thead>
            <tr>
                <th>Id</th>
                <th>Nome</th>
                <th>Email</th>
                <th>Telefone</th>
                <th>Celular</th>
                <th>RG</th>
                <th>CPF</th>
                <th>Endereco</th>

            </tr>
        </thead>
        <tbody>
            @foreach (var cliente in clientes)
             {
                <tr>
                    <td>@cliente.Id</td>
                    <td>@cliente.Nome</td>
                    <td>@cliente.Email</td>
                    <td>@cliente.Telefone</td>
                    <td>@cliente.Celular</td>
                    <td>@cliente.Rg</td>
                    <td>@cliente.Cpf</td>
                    <td>@cliente.Endereco</td>
                </tr>
             }
        </tbody>
    </table>
}

@code {

    private Models.Cliente _cliente = new Models.Cliente();

    private IEnumerable<Models.Cliente> clientes;

    protected override async Task OnInitializedAsync()
    {
        clientes = Service.GetAll();
    }

    private void Cadastrar()
    {
        Service.Add(_cliente);
    }


}
